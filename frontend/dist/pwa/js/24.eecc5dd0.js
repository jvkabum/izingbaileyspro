(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[24],{"907f":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return"admin"===t.userProfile?e("div",[e("q-table",{staticClass:"my-sticky-dynamic q-ma-lg",attrs:{flat:"",bordered:"",square:"","hide-bottom":"",title:"Etiquetas",data:t.etiquetas,columns:t.columns,loading:t.loading,"row-key":"id",pagination:t.pagination,"rows-per-page-options":[0]},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"top-right",fn:function(){return[e("q-btn",{attrs:{color:"primary",label:"Adicionar",rounded:""},on:{click:function(e){t.etiquetaEdicao={},t.modalEtiqueta=!0}}})]},proxy:!0},{key:"body-cell-color",fn:function(a){return[e("q-td",{staticClass:"text-center"},[e("div",{staticClass:"q-pa-sm rounded-borders",style:`background: ${a.row.color}`},[t._v("\n          "+t._s(a.row.color)+"\n        ")])])]}},{key:"body-cell-isActive",fn:function(t){return[e("q-td",{staticClass:"text-center"},[e("q-icon",{attrs:{size:"24px",name:t.value?"mdi-check-circle-outline":"mdi-close-circle-outline",color:t.value?"positive":"negative"}})],1)]}},{key:"body-cell-acoes",fn:function(a){return[e("q-td",{staticClass:"text-center"},[e("q-btn",{attrs:{flat:"",round:"",icon:"edit"},on:{click:function(e){return t.editarEtiqueta(a.row)}}}),e("q-btn",{attrs:{flat:"",round:"",icon:"mdi-delete"},on:{click:function(e){return t.deletarEtiqueta(a.row)}}})],1)]}}],null,!1,3428502248)}),e("ModalEtiqueta",{attrs:{modalEtiqueta:t.modalEtiqueta,etiquetaEdicao:t.etiquetaEdicao},on:{"update:modalEtiqueta":function(e){t.modalEtiqueta=e},"update:modal-etiqueta":function(e){t.modalEtiqueta=e},"update:etiquetaEdicao":function(e){t.etiquetaEdicao=e},"update:etiqueta-edicao":function(e){t.etiquetaEdicao=e},"modal-etiqueta:criada":t.etiquetaCriada,"modal-etiqueta:editada":t.etiquetaEditada}})],1):t._e()},o=[],s=(a("14d9"),a("163e")),l=function(){var t=this,e=t._self._c;return e("q-dialog",{attrs:{persistent:"",value:t.modalEtiqueta},on:{hide:t.fecharModal,show:t.abrirModal}},[e("q-card",{staticClass:"q-pa-lg",staticStyle:{width:"500px"}},[e("div",{staticClass:"text-h6"},[t._v(t._s(t.etiquetaEdicao.id?"Editar":"Criar")+" Etiqueta")]),e("q-card-section",[e("q-input",{staticClass:"row col",attrs:{rounded:"",dense:"",outlined:"",label:"Nome da Etiqueta"},model:{value:t.etiqueta.tag,callback:function(e){t.$set(t.etiqueta,"tag",e)},expression:"etiqueta.tag"}}),e("q-input",{staticClass:"q-my-md",style:`background: ${t.etiqueta.color}; border-radius: 20px `,attrs:{rounded:"",outlined:"",dense:"","hide-bottom-space":"",rules:["anyColor"],dark:!1},scopedSlots:t._u([{key:"preappend",fn:function(){},proxy:!0},{key:"append",fn:function(){return[e("q-icon",{staticClass:"cursor-pointer",attrs:{name:"colorize"}},[e("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[e("q-color",{attrs:{"format-model":"hex",square:"","default-view":"palette","no-header":"",bordered:""},model:{value:t.etiqueta.color,callback:function(e){t.$set(t.etiqueta,"color",e)},expression:"etiqueta.color"}})],1)],1)]},proxy:!0}]),model:{value:t.etiqueta.color,callback:function(e){t.$set(t.etiqueta,"color",e)},expression:"etiqueta.color"}}),e("q-checkbox",{attrs:{label:"Ativo"},model:{value:t.etiqueta.isActive,callback:function(e){t.$set(t.etiqueta,"isActive",e)},expression:"etiqueta.isActive"}})],1),e("q-card-actions",{staticClass:"q-mt-md",attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-mr-md",attrs:{rounded:"",label:"Cancelar",color:"negative"}}),e("q-btn",{attrs:{rounded:"",label:"Salvar",color:"positive"},on:{click:t.handleEtiqueta}})],1)],1)],1)},n=[],r={name:"ModalEtiqueta",props:{modalEtiqueta:{type:Boolean,default:!1},etiquetaEdicao:{type:Object,default:()=>({id:null})}},data(){return{etiqueta:{id:null,tag:null,color:"#ffffff",isActive:!0}}},methods:{resetarEtiqueta(){this.etiqueta={id:null,tag:null,color:"#ffffff",isActive:!0}},fecharModal(){this.resetarEtiqueta(),this.$emit("update:etiquetaEdicao",{id:null}),this.$emit("update:modalEtiqueta",!1)},abrirModal(){this.etiquetaEdicao.id?this.etiqueta={...this.etiquetaEdicao}:this.resetarEtiqueta()},async handleEtiqueta(){try{if(this.loading=!0,this.etiqueta.id){const{data:t}=await Object(s["a"])(this.etiqueta);this.$emit("modal-etiqueta:editada",t),this.$q.notify({type:"info",progress:!0,position:"top",textColor:"black",message:"Etiqueta editada!",actions:[{icon:"close",round:!0,color:"white"}]})}else{const{data:t}=await Object(s["b"])(this.etiqueta);this.$emit("modal-etiqueta:criada",t),this.$q.notify({type:"positive",progress:!0,position:"top",message:"Etiqueta criada!",actions:[{icon:"close",round:!0,color:"white"}]})}this.loading=!1,this.fecharModal()}catch(t){console.error(t),this.$notificarErro("Ocorreu um erro ao criar a etiqueta",t)}}}},c=r,d=a("2877"),u=a("24e8"),q=a("f09f"),p=a("a370"),f=a("27f9"),m=a("0016"),h=a("7cbe"),b=a("b498"),E=a("8f8e"),g=a("4b7e"),v=a("9c40"),y=a("7f67"),k=a("eebe"),w=a.n(k),C=Object(d["a"])(c,l,n,!1,null,"7f397d08",null),x=C.exports;w()(C,"components",{QDialog:u["a"],QCard:q["a"],QCardSection:p["a"],QInput:f["a"],QIcon:m["a"],QPopupProxy:h["a"],QColor:b["a"],QCheckbox:E["a"],QCardActions:g["a"],QBtn:v["a"]}),w()(C,"directives",{ClosePopup:y["a"]});var $={name:"Etiquetas",components:{ModalEtiqueta:x},data(){return{userProfile:"user",etiquetaEdicao:{},modalEtiqueta:!1,etiquetas:[],pagination:{rowsPerPage:40,rowsNumber:0,lastIndex:0},loading:!1,columns:[{name:"id",label:"#",field:"id",align:"left"},{name:"tag",label:"Etiqueta",field:"tag",align:"left"},{name:"color",label:"Cor",field:"color",align:"center"},{name:"isActive",label:"Ativo",field:"isActive",align:"center"},{name:"acoes",label:"Ações",field:"acoes",align:"center"}]}},methods:{async listarEtiquetas(){const{data:t}=await Object(s["d"])();this.etiquetas=t},etiquetaCriada(t){const e=[...this.etiquetas];e.push(t),this.etiquetas=[...e]},etiquetaEditada(t){const e=[...this.etiquetas],a=e.findIndex((e=>e.id===t.id));a>-1&&(e[a]=t),this.etiquetas=[...e]},editarEtiqueta(t){this.etiquetaEdicao={...t},this.modalEtiqueta=!0},deletarEtiqueta(t){this.$q.dialog({title:"Atenção!!",message:`Deseja realmente deletar a Etiqueta "${t.tag}"?`,cancel:{label:"Não",color:"primary",push:!0},ok:{label:"Sim",color:"negative",push:!0},persistent:!0}).onOk((()=>{this.loading=!0,Object(s["c"])(t).then((e=>{let a=[...this.etiquetas];a=a.filter((e=>e.id!==t.id)),this.etiquetas=[...a],this.$q.notify({type:"positive",progress:!0,position:"top",message:`Etiqueta ${t.tag} deletada!`,actions:[{icon:"close",round:!0,color:"white"}]})})),this.loading=!1}))}},mounted(){this.userProfile=localStorage.getItem("profile"),this.listarEtiquetas()}},A=$,Q=a("eaac"),_=a("db86"),O=Object(d["a"])(A,i,o,!1,null,"535beee0",null);e["default"]=O.exports;w()(O,"components",{QTable:Q["a"],QBtn:v["a"],QTd:_["a"],QIcon:m["a"]})}}]);