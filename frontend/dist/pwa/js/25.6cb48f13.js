(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[25],{7010:function(a,i,t){"use strict";t.r(i);var e=function(){var a=this,i=a._self._c;return"admin"===a.userProfile?i("div",[i("q-table",{staticClass:"my-sticky-dynamic q-ma-lg",attrs:{flat:"",bordered:"",square:"","hide-bottom":"",title:"Filas",data:a.filas,columns:a.columns,loading:a.loading,"row-key":"id",pagination:a.pagination,"rows-per-page-options":[0]},on:{"update:pagination":function(i){a.pagination=i}},scopedSlots:a._u([{key:"top-right",fn:function(){return[i("q-btn",{attrs:{color:"primary",label:"Adicionar",rounded:""},on:{click:function(i){a.filaEdicao={},a.modalFila=!0}}})]},proxy:!0},{key:"body-cell-isActive",fn:function(a){return[i("q-td",{staticClass:"text-center"},[i("q-icon",{attrs:{size:"24px",name:a.value?"mdi-check-circle-outline":"mdi-close-circle-outline",color:a.value?"positive":"negative"}})],1)]}},{key:"body-cell-acoes",fn:function(t){return[i("q-td",{staticClass:"text-center"},[i("q-btn",{attrs:{flat:"",round:"",icon:"edit"},on:{click:function(i){return a.editarFila(t.row)}}}),i("q-btn",{attrs:{flat:"",round:"",icon:"mdi-delete"},on:{click:function(i){return a.deletarFila(t.row)}}})],1)]}}],null,!1,858365261)}),i("ModalFila",{attrs:{modalFila:a.modalFila,filaEdicao:a.filaEdicao},on:{"update:modalFila":function(i){a.modalFila=i},"update:modal-fila":function(i){a.modalFila=i},"update:filaEdicao":function(i){a.filaEdicao=i},"update:fila-edicao":function(i){a.filaEdicao=i},"modal-fila:criada":a.filaCriada,"modal-fila:editada":a.filaEditada}})],1):a._e()},l=[],o=(t("14d9"),t("ee0e")),s=function(){var a=this,i=a._self._c;return i("q-dialog",{attrs:{persistent:"",value:a.modalFila},on:{hide:a.fecharModal,show:a.abrirModal}},[i("q-card",{staticClass:"q-pa-lg",staticStyle:{width:"500px"}},[i("div",{staticClass:"text-h6"},[a._v(a._s(a.filaEdicao.id?"Editar":"Criar")+" Fila")]),i("q-card-section",[i("q-input",{staticClass:"row col",attrs:{rounded:"",outlined:"",dense:"",label:"Nome da Fila"},model:{value:a.fila.queue,callback:function(i){a.$set(a.fila,"queue",i)},expression:"fila.queue"}}),i("q-checkbox",{attrs:{label:"Ativo"},model:{value:a.fila.isActive,callback:function(i){a.$set(a.fila,"isActive",i)},expression:"fila.isActive"}})],1),i("q-card-actions",{staticClass:"q-mt-md",attrs:{align:"right"}},[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-mr-md",attrs:{rounded:"",label:"Cancelar",color:"negative"}}),i("q-btn",{attrs:{rounded:"",label:"Salvar",color:"positive"},on:{click:a.handleFila}})],1)],1)],1)},n=[],d={name:"ModalFila",props:{modalFila:{type:Boolean,default:!1},filaEdicao:{type:Object,default:()=>({id:null})}},data(){return{fila:{id:null,queue:null,isActive:!0}}},methods:{resetarFila(){this.fila={id:null,queue:null,isActive:!0}},fecharModal(){this.resetarFila(),this.$emit("update:filaEdicao",{id:null}),this.$emit("update:modalFila",!1)},abrirModal(){this.filaEdicao.id?this.fila={...this.filaEdicao}:this.resetarFila()},async handleFila(){try{if(this.loading=!0,this.fila.id){const{data:a}=await Object(o["a"])(this.fila);this.$emit("modal-fila:editada",a),this.$q.notify({type:"info",progress:!0,position:"top",textColor:"black",message:"Etapa editada!",actions:[{icon:"close",round:!0,color:"white"}]})}else{const{data:a}=await Object(o["b"])(this.fila);this.$emit("modal-fila:criada",a),this.$q.notify({type:"positive",progress:!0,position:"top",message:"Fila criada!",actions:[{icon:"close",round:!0,color:"white"}]})}this.loading=!1,this.fecharModal()}catch(a){console.error(a),this.$notificarErro("Ocorreu um erro!",a)}}}},c=d,r=t("2877"),u=t("24e8"),f=t("f09f"),p=t("a370"),m=t("27f9"),h=t("8f8e"),b=t("4b7e"),g=t("9c40"),q=t("7f67"),v=t("eebe"),F=t.n(v),y=Object(r["a"])(c,s,n,!1,null,"51ff0381",null),w=y.exports;F()(y,"components",{QDialog:u["a"],QCard:f["a"],QCardSection:p["a"],QInput:m["a"],QCheckbox:h["a"],QCardActions:b["a"],QBtn:g["a"]}),F()(y,"directives",{ClosePopup:q["a"]});var k={name:"Filas",components:{ModalFila:w},data(){return{userProfile:"user",filaEdicao:{},modalFila:!1,filas:[],pagination:{rowsPerPage:40,rowsNumber:0,lastIndex:0},loading:!1,columns:[{name:"id",label:"#",field:"id",align:"left"},{name:"queue",label:"Fila",field:"queue",align:"left"},{name:"isActive",label:"Ativo",field:"isActive",align:"center"},{name:"acoes",label:"Ações",field:"acoes",align:"center"}]}},methods:{async listarFilas(){const{data:a}=await Object(o["d"])();this.filas=a},filaCriada(a){const i=[...this.filas];i.push(a),this.filas=[...i]},filaEditada(a){const i=[...this.filas],t=i.findIndex((i=>i.id===a.id));t>-1&&(i[t]=a),this.filas=[...i]},editarFila(a){this.filaEdicao={...a},this.modalFila=!0},deletarFila(a){this.$q.dialog({title:"Atenção!!",message:`Deseja realmente deletar a Fila "${a.queue}"?`,cancel:{label:"Não",color:"primary",push:!0},ok:{label:"Sim",color:"negative",push:!0},persistent:!0}).onOk((()=>{this.loading=!0,Object(o["c"])(a).then((i=>{let t=[...this.filas];t=t.filter((i=>i.id!==a.id)),this.filas=[...t],this.$q.notify({type:"positive",progress:!0,position:"top",message:`Fila ${a.queue} deletada!`,actions:[{icon:"close",round:!0,color:"white"}]})})),this.loading=!1}))}},mounted(){this.userProfile=localStorage.getItem("profile"),this.listarFilas()}},C=k,E=t("eaac"),x=t("db86"),A=t("0016"),$=Object(r["a"])(C,e,l,!1,null,"0d09acb7",null);i["default"]=$.exports;F()($,"components",{QTable:E["a"],QBtn:g["a"],QTd:x["a"],QIcon:A["a"]})}}]);