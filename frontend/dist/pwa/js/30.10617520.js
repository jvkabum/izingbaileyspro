(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[30],{"36f3":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return"super"===e.userProfile?t("div",[t("div",{staticClass:"row col full-width q-pa-lg"},[t("q-card",{staticClass:"full-width",attrs:{flat:"",bordered:""}},[t("q-card-section",{staticClass:"text-h6 text-bold"},[e._v("\n          Canais\n          "),t("q-space")],1)],1)],1),t("div",{staticClass:"row full-width q-py-lg q-px-md"},[e._l(e.whatsapps,(function(a){return[t("q-card",{key:a.id,staticClass:"col-xs-12 col-sm-5 col-md-4 col-lg-3 q-ma-md",attrs:{flat:"",bordered:""}},[t("q-item",[t("q-item-section",{attrs:{avatar:""}},[t("q-avatar",[t("q-icon",{attrs:{size:"40px",name:`img:${a.type}-logo.png`}})],1)],1),t("q-item-section",[t("q-item-label",{staticClass:"text-h6 text-bold"},[e._v("Nome: "+e._s(a.name))]),t("q-item-label",{staticClass:"text-h6 text-caption"},[e._v("\n                "+e._s(a.type)+"\n              ")]),t("q-item-label",{staticClass:"text-bold text-primary text-body1"},[e._v("Cliente: "+e._s(`${a.tenant&&a.tenant.id} - ${a.tenant&&a.tenant.name}`))])],1),t("q-item-section",{attrs:{side:""}})],1),t("q-separator"),t("q-card-section",[t("ItemStatusChannel",{attrs:{item:a}})],1),t("q-separator"),t("q-card-actions",{staticClass:"q-pa-md q-pt-none",attrs:{align:"center"}},["DISCONNECTED"==a.status?t("q-btn-group",{attrs:{outline:""}}):e._e()],1)],1)]}))],2),t("q-inner-loading",{attrs:{showing:e.loading}},[t("q-spinner-gears",{attrs:{size:"50px",color:"primary"}})],1)],1):e._e()},i=[],o=a("8982");function n(e){return Object(o["a"])({url:"/admin/channels/",method:"get"})}var r=a("b166"),l=a("e3ee"),c=a("d9d6"),m=a.n(c),d=a("2f62"),u=function(){var e=this,t=e._self._c;return t("div",[t("q-item",[t("q-item-section",{attrs:{avatar:""}},["qrcode"==e.item.status?t("q-icon",{attrs:{color:"primary",name:"mdi-crop-free",size:"2.5em"}}):e._e(),"DESTROYED"==e.item.status?t("q-icon",{attrs:{color:"primary",name:"mdi-qrcode-scan",size:"2.5em"}}):e._e(),"DISCONNECTED"==e.item.status?t("q-icon",{attrs:{color:"negative",size:"2.5em",name:"mdi-wifi-alert"}}):e._e(),"CONNECTED"==e.item.status?t("q-icon",{attrs:{name:"mdi-wifi-arrow-up-down",color:"green-8",size:"2.5em"}}):e._e(),["PAIRING","TIMEOUT"].includes(e.item.status)?t("q-icon",{attrs:{color:"negative",size:"2.5em",name:"mdi-wifi-strength-1-alert"}}):e._e(),"OPENING"==e.item.status?t("q-spinner",{attrs:{color:"green-7",size:"3em",thickness:2}}):e._e()],1),t("q-item-section",["qrcode"==e.item.status?t("q-item-label",[t("span",{staticClass:"text-weight-medium"},[e._v(" Esperando leitura do QR Code ")]),t("span",{staticClass:"row col"},[e._v(" Solicite que seu cliente leia o QR Code ")])]):e._e(),"DESTROYED"==e.item.status?t("q-item-label",[t("span",{staticClass:"text-weight-medium"},[e._v(" Esperando leitura do QR Code ")]),t("span",{staticClass:"row col"},[e._v(" Solicite que seu cliente leia o QR Code ")])]):e._e(),"DISCONNECTED"==e.item.status?t("q-item-label",[t("span",{staticClass:"text-weight-medium"},[e._v(" Falha ao iniciar comunicação para este canal. ")]),"whatsapp"===e.item.type?t("span",{staticClass:"row col"},[e._v(" Certifique-se de que seu celular esteja conectado à internet e tente novamente, ou solicite um novo QR Code ")]):e._e(),"telegram"===e.item.type?t("span",{staticClass:"row col"},[e._v(" Tente conectar novamente. Caso o erro permaneça, confirme se o token está correto.")]):e._e(),"instagram"===e.item.type?t("span",{staticClass:"row col"},[e._v(" Tente conectar novamente. Caso o erro permaneça, confirme se as credenciais estão corretas.")]):e._e()]):e._e(),"CONNECTED"==e.item.status?t("q-item-label",[t("span",{staticClass:"text-weight-medium"},[e._v(" Conexão estabelecida! ")])]):e._e(),["PAIRING","TIMEOUT"].includes(e.item.status)?t("q-item-label",[t("span",{staticClass:"text-weight-medium"},[e._v(" A conexão com o celular foi perdida ")]),t("span",{staticClass:"row col"},[e._v(" Certifique-se de que seu celular esteja conectado à internet e o WhatsApp esteja aberto, ou clique no botão 'Desconectar' para obter um novo QR Code ")])]):e._e(),"OPENING"==e.item.status?t("q-item-label",[t("span",{staticClass:"text-weight-medium"},[e._v(" Estabelecendo conexão. ")]),t("span",{staticClass:"row col"},[e._v(" Isso poderá demorar um pouco... ")])]):e._e(),t("q-item-label",{attrs:{caption:""}},[e._v("\n        Última Atualização: "+e._s(e.formatarData(e.item.updatedAt,"dd/MM/yyyy HH:mm"))+"\n      ")])],1)],1)],1)},p=[],q={name:"ItemStatusChannel",props:{item:{type:Object,default:()=>{}}},methods:{formatarData(e,t){return Object(r["a"])(Object(l["a"])(e),t,{locale:m.a})}}},C=q,b=a("2877"),f=a("66e5"),_=a("4074"),h=a("0016"),g=a("0d59"),v=a("0170"),w=a("eebe"),S=a.n(w),I=Object(b["a"])(C,u,p,!1,null,null,null),x=I.exports;S()(I,"components",{QItem:f["a"],QItemSection:_["a"],QIcon:h["a"],QSpinner:g["a"],QItemLabel:v["a"]});var E=a("6320");const y=JSON.parse(localStorage.getItem("usuario"));var O={name:"IndexSessoesWhatsapp",components:{ItemStatusChannel:x},data(){return{userProfile:"user",loading:!1,userLogado:y,empresas:[],isAdmin:!1,whatsappSelecionado:{},whatsAppId:null,objStatus:{qrcode:""},columns:[{name:"name",label:"Nome",field:"name",align:"left"},{name:"status",label:"Status",field:"status",align:"center"},{name:"session",label:"Sessão",field:"status",align:"center"},{name:"number",label:"Número",field:"number",align:"center"},{name:"updatedAt",label:"Última Atualização",field:"updatedAt",align:"center",format:e=>this.formatarData(e,"dd/MM/yyyy HH:mm")},{name:"isDefault",label:"Padrão",field:"isDefault",align:"center"},{name:"acoes",label:"Ações",field:"acoes",align:"center"}]}},computed:{...Object(d["b"])(["whatsapps"])},methods:{formatarData(e,t){return Object(r["a"])(Object(l["a"])(e),t,{locale:m.a})},async listarChannels(){const{data:e}=await n();this.$store.commit("LOAD_WHATSAPPS",e)},async listarEmpresas(){const{data:e}=await Object(E["a"])();this.empresas=e}},mounted(){this.isAdmin=localStorage.getItem("profile"),this.listarChannels(),this.listarEmpresas(),this.userProfile=localStorage.getItem("profile")},destroyed(){this.$root.$off("UPDATE_SESSION")}},Q=O,D=a("f09f"),N=a("a370"),A=a("2c91"),T=a("cb32"),j=a("eb85"),P=a("4b7e"),z=a("e7a9"),R=a("74f7"),G=a("cf57"),M=Object(b["a"])(Q,s,i,!1,null,"42df93a3",null);t["default"]=M.exports;S()(M,"components",{QCard:D["a"],QCardSection:N["a"],QSpace:A["a"],QItem:f["a"],QItemSection:_["a"],QAvatar:T["a"],QIcon:h["a"],QItemLabel:v["a"],QSeparator:j["a"],QCardActions:P["a"],QBtnGroup:z["a"],QInnerLoading:R["a"],QSpinnerGears:G["a"]})}}]);